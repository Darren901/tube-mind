# YouTube å½±ç‰‡æ‘˜è¦ SaaS è¨­è¨ˆæ–‡ä»¶

**æ—¥æœŸ**: 2026-01-18  
**ä½œè€…**: Darren  
**ç‹€æ…‹**: è¨­è¨ˆå®Œæˆï¼Œå¾…å¯¦ä½œ

---

## å°ˆæ¡ˆæ¦‚è¿°

### ç›®æ¨™
æ‰“é€ ä¸€å€‹ YouTube å½±ç‰‡è‡ªå‹•æ‘˜è¦å·¥å…·ï¼Œå¹«åŠ©ä½¿ç”¨è€…è¿½è¹¤åœ‹å¤– YouTuber çš„æœ€æ–°å½±ç‰‡ï¼Œä¸¦è‡ªå‹•ç”Ÿæˆç¹é«”ä¸­æ–‡çµæ§‹åŒ–æ‘˜è¦ï¼Œè§£æ±ºèªè¨€éšœç¤™å•é¡Œã€‚

### ç›®æ¨™ä½¿ç”¨è€…
- æƒ³å­¸ç¿’åœ‹å¤–çŸ¥è­˜ä½†æœ‰èªè¨€éšœç¤™çš„å­¸ç”Ÿ/è‡ªå­¸è€…
- ä¸»è¦ä½¿ç”¨å ´æ™¯ï¼šè‡ªç”¨ + æœ‹å‹ä½¿ç”¨ï¼ˆéå•†æ¥­åŒ–ï¼‰

### æ ¸å¿ƒåƒ¹å€¼ä¸»å¼µ
- è‡ªå‹•è¿½è¹¤å–œæ„›çš„ YouTube é »é“
- AI è‡ªå‹•æå–é‡é»ä¸¦ç¿»è­¯æˆç¹ä¸­æ‘˜è¦
- çµæ§‹åŒ–å‘ˆç¾ï¼ˆä¸»é¡Œã€æ ¸å¿ƒè§€é»ã€åˆ†æ®µæ‘˜è¦ã€æ™‚é–“æˆ³ï¼‰
- å®Œå…¨å…è²»ä½¿ç”¨ï¼ˆä¾è³´å…è²»é¡åº¦ï¼‰

---

## åŠŸèƒ½éœ€æ±‚

### ä½¿ç”¨è€…æ•…äº‹

#### 1. å¸³è™Ÿé€£æ¥èˆ‡æˆæ¬Š
- ä½¿ç”¨è€…å¯ä»¥ç”¨ Google å¸³è™Ÿç™»å…¥ï¼ˆOAuthï¼‰
- æˆæ¬Šå¾Œå¯å­˜å– YouTube è¨‚é–±åˆ—è¡¨å’Œé »é“è³‡è¨Š

#### 2. é »é“ç®¡ç†
- ä½¿ç”¨è€…å¯ä»¥æ–°å¢æƒ³è¿½è¹¤çš„ YouTube é »é“
- ç³»çµ±é¡¯ç¤ºé »é“çš„å½±ç‰‡åˆ—è¡¨ï¼ˆmetadata onlyï¼‰
- ä½¿ç”¨è€…å¾å½±ç‰‡åˆ—è¡¨ä¸­å‹¾é¸æƒ³è¦æ‘˜è¦çš„å½±ç‰‡
- **é‡è¦**ï¼šæ–°å¢é »é“æ™‚ä¸è‡ªå‹•è™•ç†æ‰€æœ‰èˆŠå½±ç‰‡ï¼ˆæˆæœ¬æ§åˆ¶ï¼‰

#### 3. å½±ç‰‡æ‘˜è¦
- ä½¿ç”¨è€…å‹¾é¸å½±ç‰‡å¾Œï¼Œç³»çµ±å»ºç«‹æ‘˜è¦ä»»å‹™
- èƒŒæ™¯ Worker è™•ç†ï¼šå–å¾—å­—å¹• â†’ AI ç”Ÿæˆæ‘˜è¦
- æ‘˜è¦æ ¼å¼ï¼š
  - å½±ç‰‡ä¸»é¡Œï¼ˆä¸€å¥è©±ï¼‰
  - æ ¸å¿ƒè§€é»ï¼ˆ3-5 å€‹ bullet pointsï¼‰
  - è©³ç´°åˆ†æ®µæ‘˜è¦ï¼ˆæ¯ 2-5 åˆ†é˜ä¸€æ®µï¼ŒåŒ…å«æ™‚é–“æˆ³å’Œæ¨™é¡Œï¼‰
- ä½¿ç”¨è€…å¯å³æ™‚æŸ¥çœ‹è™•ç†ç‹€æ…‹ï¼ˆpending â†’ processing â†’ completedï¼‰

#### 4. è‡ªå‹•åµæ¸¬æ–°å½±ç‰‡
- **å®šæ™‚æª¢æŸ¥**ï¼šæ¯å¤©æ—©ä¸Š 8:00 è‡ªå‹•æª¢æŸ¥æ‰€æœ‰è¿½è¹¤é »é“çš„æ–°å½±ç‰‡
- **æ‰‹å‹•è§¸ç™¼**ï¼šä½¿ç”¨è€…å¯é»æ“Šã€Œç«‹å³æ›´æ–°ã€æŒ‰éˆ•æª¢æŸ¥æŸé »é“
- ç™¼ç¾æ–°å½±ç‰‡å¾Œè‡ªå‹•å»ºç«‹æ‘˜è¦ä»»å‹™

#### 5. æ‘˜è¦ç€è¦½
- ä½¿ç”¨è€…å¯ç€è¦½æ‰€æœ‰å·²å®Œæˆçš„æ‘˜è¦
- é»æ“Šæ™‚é–“æˆ³å¯ç›´æ¥è·³è½‰åˆ° YouTube å°æ‡‰ä½ç½®
- éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆæ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢éƒ½å¯ç”¨ï¼‰

---

## æŠ€è¡“æ¶æ§‹

### æŠ€è¡“æ£§é¸æ“‡

| å±¤ç´š | æŠ€è¡“ | ç†ç”± |
|-----|------|------|
| **å‰ç«¯æ¡†æ¶** | Next.js 14 (App Router) + TypeScript | å…¨ç«¯æ¡†æ¶ã€å…§å»º API Routesã€éƒ¨ç½²ç°¡å–® |
| **UI é¢¨æ ¼** | é»‘åº• + ç´«é»ƒæ¼¸å±¤ + ç¾ä»£åŒ–è¨­è¨ˆ | ä½¿ç”¨ ui-ux-pro-max skill å¯¦ä½œ |
| **èªè­‰** | NextAuth.js | å®Œæ•´æ”¯æ´ Google OAuth + Token ç®¡ç† |
| **è³‡æ–™åº«** | PostgreSQL (Neon å…è²»æ–¹æ¡ˆ) | 500MB å…è²»ã€è‡ªå‹•æš«åœçœæˆæœ¬ |
| **å¿«å–/ä½‡åˆ—** | Redis (Upstash å…è²»æ–¹æ¡ˆ) | 10K commands/å¤©å…è²»ã€é©åˆä»»å‹™ä½‡åˆ— |
| **ä»»å‹™ä½‡åˆ—** | BullMQ | æˆç†Ÿçš„ Redis-based Queue ç³»çµ± |
| **ORM** | Prisma | Type-safeã€è‡ªå‹• migration |
| **AI æ¨¡å‹** | Google Gemini 2.5 Flash | å…è²»é¡åº¦å¤§ã€ç¹ä¸­ç¿»è­¯å„ªç§€ |
| **éƒ¨ç½²ï¼ˆä¸»æ‡‰ç”¨ï¼‰** | GCP Cloud Run | åˆ©ç”¨ç¾æœ‰ NT$9000 é¡åº¦ |
| **éƒ¨ç½²ï¼ˆè³‡æ–™åº«ï¼‰** | Neon | å…è²» PostgreSQL |
| **éƒ¨ç½²ï¼ˆRedisï¼‰** | Upstash | å…è²» Redis |
| **å®šæ™‚ä»»å‹™** | GCP Cloud Scheduler | å…è²»é¡åº¦å…§ |

### ç‚ºä»€éº¼ä¸ç”¨ Spring Bootï¼Ÿ
- Spring Boot è¨˜æ†¶é«”æ¶ˆè€—é«˜ï¼ˆ~500MB å•Ÿå‹•ï¼‰
- éƒ¨ç½²æˆæœ¬é«˜æ–¼ Next.js (~100-200MB)
- Next.js å…¨ç«¯é–‹ç™¼é€Ÿåº¦æ›´å¿«
- Node.js ç”Ÿæ…‹ç³» LLM æ•´åˆæ›´å®¹æ˜“

---

## ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä½¿ç”¨è€…                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Next.js App (GCP Cloud Run)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å‰ç«¯ (React + Tailwind)                              â”‚   â”‚
â”‚  â”‚  - é »é“ç®¡ç†é é¢                                        â”‚   â”‚
â”‚  â”‚  - å½±ç‰‡åˆ—è¡¨é é¢                                        â”‚   â”‚
â”‚  â”‚  - æ‘˜è¦ç€è¦½é é¢                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  API Routes                                           â”‚   â”‚
â”‚  â”‚  - /api/auth (NextAuth.js)                           â”‚   â”‚
â”‚  â”‚  - /api/channels (é »é“ CRUD)                         â”‚   â”‚
â”‚  â”‚  - /api/videos (å½±ç‰‡åˆ—è¡¨)                            â”‚   â”‚
â”‚  â”‚  - /api/summaries (æ‘˜è¦ CRUD)                        â”‚   â”‚
â”‚  â”‚  - /api/cron/check-new-videos (å®šæ™‚ä»»å‹™)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ ¸å¿ƒé‚è¼¯                                             â”‚   â”‚
â”‚  â”‚  - YouTubeClient (API å°è£)                          â”‚   â”‚
â”‚  â”‚  - Prisma (ORM)                                      â”‚   â”‚
â”‚  â”‚  - BullMQ (Queue Producer)                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
        â†“                     â†“          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Neon         â”‚    â”‚ Upstash      â”‚   â”‚ Worker           â”‚
â”‚ PostgreSQL   â”‚    â”‚ Redis        â”‚   â”‚ (Cloud Run)      â”‚
â”‚              â”‚    â”‚              â”‚   â”‚                  â”‚
â”‚ - users      â”‚    â”‚ - Queue Jobs â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ - channels   â”‚    â”‚ - Cache      â”‚   â”‚ â”‚ BullMQ       â”‚ â”‚
â”‚ - videos     â”‚    â”‚              â”‚   â”‚ â”‚ Worker       â”‚ â”‚
â”‚ - summaries  â”‚    â”‚              â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                        â”‚ â”‚ 1. å–å­—å¹•    â”‚ â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚ 2. AI æ‘˜è¦   â”‚ â”‚
â”‚ GCP Cloud        â”‚                   â”‚ â”‚ 3. å„²å­˜çµæœ  â”‚ â”‚
â”‚ Scheduler        â”‚                   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ æ¯å¤© 8:00        â”‚                            â”‚
â”‚ è§¸ç™¼ Cron API    â”‚                            â†“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ Gemini 2.5 Flash â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ API              â”‚
â”‚ YouTube Data     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
â”‚ API v3           â”‚                   â”‚ - å­—å¹•ç¿»è­¯       â”‚
â”‚                  â”‚                   â”‚ - çµæ§‹åŒ–æ‘˜è¦     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è³‡æ–™åº«è¨­è¨ˆ

### Prisma Schema

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ä½¿ç”¨è€…
model User {
  id            String    @id @default(cuid())
  email         String    @unique
  name          String?
  googleId      String    @unique
  youtubeToken  String?   // åŠ å¯†å„²å­˜çš„ YouTube OAuth token (ç”± NextAuth ç®¡ç†)
  
  channels      Channel[]
  summaries     Summary[]
  
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

// è¿½è¹¤çš„é »é“
model Channel {
  id              String    @id @default(cuid())
  youtubeId       String    // YouTube é »é“ ID
  title           String
  description     String?
  thumbnail       String?
  
  userId          String
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  videos          Video[]
  lastCheckedAt   DateTime? // æœ€å¾Œä¸€æ¬¡æª¢æŸ¥æ–°å½±ç‰‡çš„æ™‚é–“
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  
  @@unique([userId, youtubeId]) // åŒä¸€ä½¿ç”¨è€…ä¸èƒ½é‡è¤‡æ–°å¢åŒé »é“
  @@index([userId])
}

// å½±ç‰‡
model Video {
  id              String    @id @default(cuid())
  youtubeId       String    @unique // YouTube å½±ç‰‡ ID
  title           String
  description     String?   @db.Text
  thumbnail       String?
  duration        Int       // å½±ç‰‡é•·åº¦ï¼ˆç§’ï¼‰
  publishedAt     DateTime  // å½±ç‰‡ç™¼å¸ƒæ™‚é–“
  
  channelId       String
  channel         Channel   @relation(fields: [channelId], references: [id], onDelete: Cascade)
  
  summaries       Summary[]
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  
  @@index([channelId])
  @@index([publishedAt])
}

// æ‘˜è¦
model Summary {
  id              String    @id @default(cuid())
  
  videoId         String
  video           Video     @relation(fields: [videoId], references: [id], onDelete: Cascade)
  
  userId          String
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // æ‘˜è¦å…§å®¹ (JSON æ ¼å¼)
  // { 
  //   topic: string,
  //   keyPoints: string[],
  //   sections: [{ timestamp: string, title: string, summary: string }]
  // }
  content         Json      @default("{}")
  
  // è™•ç†ç‹€æ…‹
  status          String    @default("pending") // pending | processing | completed | failed
  errorMessage    String?   @db.Text
  
  // Queue Job ID (ç”¨æ–¼è¿½è¹¤å’Œé™¤éŒ¯)
  jobId           String?
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  completedAt     DateTime? // å®Œæˆæ™‚é–“
  
  @@unique([userId, videoId]) // åŒä¸€ä½¿ç”¨è€…å°åŒå½±ç‰‡åªèƒ½æœ‰ä¸€å€‹æ‘˜è¦
  @@index([userId])
  @@index([status])
}
```

### è³‡æ–™é—œä¿‚
- User 1:N Channelï¼ˆä¸€å€‹ä½¿ç”¨è€…å¯è¿½è¹¤å¤šå€‹é »é“ï¼‰
- User 1:N Summaryï¼ˆä¸€å€‹ä½¿ç”¨è€…å¯æœ‰å¤šå€‹æ‘˜è¦ï¼‰
- Channel 1:N Videoï¼ˆä¸€å€‹é »é“æœ‰å¤šéƒ¨å½±ç‰‡ï¼‰
- Video 1:N Summaryï¼ˆä¸€éƒ¨å½±ç‰‡å¯è¢«å¤šå€‹ä½¿ç”¨è€…æ‘˜è¦ï¼‰
- User + Video â†’ å”¯ä¸€ Summaryï¼ˆåŒä½¿ç”¨è€…å°åŒå½±ç‰‡åªæœ‰ä¸€å€‹æ‘˜è¦ï¼‰

---

## æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œç´°ç¯€

### 1. èªè­‰èˆ‡æˆæ¬Š (NextAuth.js)

#### OAuth Flow
```typescript
// app/api/auth/[...nextauth]/route.ts
import NextAuth from 'next-auth';
import GoogleProvider from 'next-auth/providers/google';

export const authOptions = {
  providers: [
    GoogleProvider({
      clientId: process.env.GOOGLE_CLIENT_ID!,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
      authorization: {
        params: {
          scope: [
            'openid',
            'email',
            'profile',
            'https://www.googleapis.com/auth/youtube.readonly',
            'https://www.googleapis.com/auth/youtube.force-ssl',
          ].join(' '),
          access_type: 'offline',  // å–å¾— refresh token
          prompt: 'consent',        // å¼·åˆ¶é¡¯ç¤ºåŒæ„ç•«é¢
        },
      },
    }),
  ],
  
  callbacks: {
    async jwt({ token, account, user }) {
      // åˆæ¬¡ç™»å…¥ï¼šå„²å­˜ tokens
      if (account) {
        token.accessToken = account.access_token;
        token.refreshToken = account.refresh_token;
        token.accessTokenExpires = account.expires_at * 1000;
        token.userId = user.id;
      }
      
      // Token é‚„æ²’éæœŸ
      if (Date.now() < token.accessTokenExpires) {
        return token;
      }
      
      // Token éæœŸï¼Œåˆ·æ–°å®ƒ
      return await refreshAccessToken(token);
    },
    
    async session({ session, token }) {
      session.accessToken = token.accessToken;
      session.error = token.error;
      session.userId = token.userId;
      return session;
    },
  },
};

async function refreshAccessToken(token) {
  try {
    const response = await fetch('https://oauth2.googleapis.com/token', {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: new URLSearchParams({
        client_id: process.env.GOOGLE_CLIENT_ID!,
        client_secret: process.env.GOOGLE_CLIENT_SECRET!,
        grant_type: 'refresh_token',
        refresh_token: token.refreshToken,
      }),
    });
    
    const refreshedTokens = await response.json();
    
    if (!response.ok) throw refreshedTokens;
    
    return {
      ...token,
      accessToken: refreshedTokens.access_token,
      accessTokenExpires: Date.now() + refreshedTokens.expires_in * 1000,
      refreshToken: refreshedTokens.refresh_token ?? token.refreshToken,
    };
  } catch (error) {
    return { ...token, error: 'RefreshAccessTokenError' };
  }
}
```

**å„ªé»ï¼š**
- Token è‡ªå‹•åˆ·æ–°ï¼Œä½¿ç”¨è€…ç„¡æ„Ÿ
- å®‰å…¨å„²å­˜åœ¨ HTTP-only cookie
- ç„¡ç‹€æ…‹è¨­è¨ˆï¼Œä¸ä¾è³´ Redis session

---

### 2. YouTube API æ•´åˆ

#### YouTube Client å°è£
```typescript
// lib/youtube/client.ts
import { google } from 'googleapis';
import { YoutubeTranscript } from 'youtube-transcript';

export class YouTubeClient {
  private youtube;
  
  constructor(accessToken: string) {
    const oauth2Client = new google.auth.OAuth2();
    oauth2Client.setCredentials({ access_token: accessToken });
    this.youtube = google.youtube({ version: 'v3', auth: oauth2Client });
  }
  
  // å–å¾—ä½¿ç”¨è€…è¨‚é–±çš„é »é“
  async getSubscriptions() {
    const response = await this.youtube.subscriptions.list({
      part: ['snippet'],
      mine: true,
      maxResults: 50,
    });
    return response.data.items || [];
  }
  
  // å–å¾—é »é“çš„å½±ç‰‡åˆ—è¡¨
  async getChannelVideos(channelId: string, maxResults = 50) {
    const response = await this.youtube.search.list({
      part: ['snippet'],
      channelId,
      type: ['video'],
      order: 'date',
      maxResults,
    });
    return response.data.items || [];
  }
  
  // å–å¾—å½±ç‰‡è©³ç´°è³‡è¨Šï¼ˆåŒ…å«æ™‚é•·ï¼‰
  async getVideoDetails(videoIds: string[]) {
    const response = await this.youtube.videos.list({
      part: ['snippet', 'contentDetails'],
      id: videoIds,
    });
    return response.data.items || [];
  }
}

// å–å¾—å½±ç‰‡å­—å¹•ï¼ˆä¸æ¶ˆè€— YouTube API é…é¡ï¼‰
export async function getVideoTranscript(videoId: string) {
  try {
    // å„ªå…ˆå–è‹±æ–‡å­—å¹•
    const transcript = await YoutubeTranscript.fetchTranscript(videoId, {
      lang: 'en',
    });
    return transcript.map(item => ({
      timestamp: item.offset,
      text: item.text,
    }));
  } catch {
    // æ²’æœ‰è‹±æ–‡å­—å¹•ï¼Œå–è‡ªå‹•ç”Ÿæˆå­—å¹•
    const transcript = await YoutubeTranscript.fetchTranscript(videoId);
    return transcript.map(item => ({
      timestamp: item.offset,
      text: item.text,
    }));
  }
}
```

**YouTube API é…é¡ç®¡ç†ï¼š**
- æ¯æ—¥å…è²»é¡åº¦ï¼š10,000 units
- `subscriptions.list`: 1 unit
- `search.list`: 100 units
- `videos.list`: 1 unit
- è‡ªç”¨å ´æ™¯å®Œå…¨å¤ ç”¨

---

### 3. Redis Queue è¨­è¨ˆ (BullMQ)

#### Queue å®šç¾©
```typescript
// lib/queue/summaryQueue.ts
import { Queue, Worker } from 'bullmq';
import Redis from 'ioredis';

const connection = new Redis(process.env.REDIS_URL!);

// å®šç¾© Queue
export const summaryQueue = new Queue('video-summary', { connection });

// Job è³‡æ–™çµæ§‹
export interface SummaryJobData {
  summaryId: string;
  videoId: string;
  youtubeVideoId: string;
  userId: string;
}

// æ–°å¢ä»»å‹™åˆ° Queue
export async function addSummaryJob(data: SummaryJobData) {
  return await summaryQueue.add('process-summary', data, {
    attempts: 3,              // å¤±æ•—é‡è©¦ 3 æ¬¡
    backoff: {
      type: 'exponential',
      delay: 2000,            // ç¬¬ä¸€æ¬¡ 2 ç§’ï¼Œç¬¬äºŒæ¬¡ 4 ç§’ï¼Œç¬¬ä¸‰æ¬¡ 8 ç§’
    },
    removeOnComplete: 100,    // ä¿ç•™æœ€è¿‘ 100 å€‹å®Œæˆä»»å‹™
    removeOnFail: 200,        // ä¿ç•™æœ€è¿‘ 200 å€‹å¤±æ•—ä»»å‹™
  });
}
```

#### Worker å¯¦ä½œ
```typescript
// lib/queue/summaryWorker.ts
import { Worker } from 'bullmq';
import Redis from 'ioredis';
import { prisma } from '@/lib/db';
import { getVideoTranscript } from '@/lib/youtube/client';
import { generateSummaryWithRetry } from '@/lib/ai/summarizer';

const connection = new Redis(process.env.REDIS_URL!);

export const summaryWorker = new Worker(
  'video-summary',
  async (job) => {
    const { summaryId, youtubeVideoId } = job.data;
    
    console.log(`[Worker] Processing summary ${summaryId}`);
    
    // 1. æ›´æ–°ç‹€æ…‹ç‚º processing
    await prisma.summary.update({
      where: { id: summaryId },
      data: { 
        status: 'processing',
        jobId: job.id,
      },
    });
    
    // 2. å–å¾—å½±ç‰‡è³‡è¨Š
    const video = await prisma.video.findFirst({
      where: { youtubeId: youtubeVideoId },
    });
    
    if (!video) {
      throw new Error(`Video ${youtubeVideoId} not found`);
    }
    
    // 3. å–å¾— YouTube å­—å¹•
    const transcript = await getVideoTranscript(youtubeVideoId);
    
    if (!transcript || transcript.length === 0) {
      throw new Error('No transcript available for this video');
    }
    
    // 4. é€çµ¦ Gemini ç”Ÿæˆæ‘˜è¦
    const summary = await generateSummaryWithRetry(transcript, video.title);
    
    // 5. å„²å­˜çµæœ
    await prisma.summary.update({
      where: { id: summaryId },
      data: {
        status: 'completed',
        content: summary,
        completedAt: new Date(),
      },
    });
    
    console.log(`[Worker] âœ… Summary ${summaryId} completed`);
    
    return { success: true };
  },
  { 
    connection,
    concurrency: 2, // åŒæ™‚è™•ç† 2 å€‹ä»»å‹™
  }
);

// éŒ¯èª¤è™•ç†
summaryWorker.on('failed', async (job, err) => {
  console.error(`[Worker] âŒ Job ${job?.id} failed:`, err);
  
  if (job?.data.summaryId) {
    await prisma.summary.update({
      where: { id: job.data.summaryId },
      data: {
        status: 'failed',
        errorMessage: err.message,
      },
    });
  }
});

summaryWorker.on('completed', (job) => {
  console.log(`[Worker] âœ… Job ${job.id} completed`);
});
```

**ç‚ºä»€éº¼éœ€è¦ Queueï¼š**
- é¿å… HTTP timeoutï¼ˆæ‘˜è¦è™•ç†éœ€ 10-30 ç§’ï¼‰
- ä¸¦è¡Œè™•ç†å¤šå€‹å½±ç‰‡
- è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
- ä½¿ç”¨è€…å¯è¿½è¹¤è™•ç†é€²åº¦

---

### 4. AI æ‘˜è¦ç”Ÿæˆ (Gemini 2.5 Flash)

```typescript
// lib/ai/summarizer.ts
import { GoogleGenerativeAI } from '@google/generative-ai';

const genAI = new GoogleGenerativeAI(process.env.GOOGLE_AI_API_KEY!);

interface TranscriptSegment {
  timestamp: number;
  text: string;
}

export interface SummaryResult {
  topic: string;
  keyPoints: string[];
  sections: {
    timestamp: string;
    title: string;
    summary: string;
  }[];
}

export async function generateVideoSummary(
  transcript: TranscriptSegment[],
  videoTitle: string
): Promise<SummaryResult> {
  
  // å°‡å­—å¹•æ•´ç†æˆå¸¶æ™‚é–“æˆ³çš„æ–‡å­—
  const transcriptText = transcript
    .map(seg => `[${formatTimestamp(seg.timestamp)}] ${seg.text}`)
    .join('\n');
  
  const prompt = `
ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„å­¸ç¿’åŠ©ç†ã€‚è«‹åˆ†æä»¥ä¸‹ YouTube å½±ç‰‡çš„è‹±æ–‡å­—å¹•ï¼Œä¸¦ç”¢ç”Ÿç¹é«”ä¸­æ–‡æ‘˜è¦ã€‚

å½±ç‰‡æ¨™é¡Œï¼š${videoTitle}

å­—å¹•å…§å®¹ï¼š
${transcriptText}

è«‹ä»¥ JSON æ ¼å¼è¼¸å‡ºï¼ŒåŒ…å«ä»¥ä¸‹çµæ§‹ï¼š
{
  "topic": "å½±ç‰‡çš„ä¸»è¦ä¸»é¡Œï¼ˆä¸€å¥è©±ï¼‰",
  "keyPoints": ["æ ¸å¿ƒè§€é»1", "æ ¸å¿ƒè§€é»2", "æ ¸å¿ƒè§€é»3"],
  "sections": [
    {
      "timestamp": "00:00",
      "title": "ç« ç¯€æ¨™é¡Œ",
      "summary": "é€™å€‹ç« ç¯€çš„è©³ç´°æ‘˜è¦ï¼ˆ3-5 å¥è©±ï¼‰"
    }
  ]
}

è¦æ±‚ï¼š
1. æ‰€æœ‰å…§å®¹å¿…é ˆæ˜¯ç¹é«”ä¸­æ–‡
2. keyPoints æŠ“å‡º 3-5 å€‹æœ€é‡è¦çš„è§€é»
3. sections æŒ‰æ™‚é–“é †åºåˆ†æ®µï¼Œæ¯ 2-5 åˆ†é˜ä¸€å€‹æ®µè½
4. æ‘˜è¦è¦å…·é«”ï¼Œä¸è¦å¤ªç± çµ±
5. ä¿ç•™é‡è¦çš„å°ˆæœ‰åè©ï¼ˆå¯é™„ä¸Šè‹±æ–‡ï¼‰
6. åªè¼¸å‡º JSONï¼Œä¸è¦å…¶ä»–èªªæ˜æ–‡å­—
`;

  // ä½¿ç”¨ Gemini 2.5 Flash
  const model = genAI.getGenerativeModel({ 
    model: 'gemini-2.5-flash-latest',
    generationConfig: {
      temperature: 0.3,
      maxOutputTokens: 8192,
      responseMimeType: 'application/json', // å¼·åˆ¶ JSON è¼¸å‡º
    },
  });
  
  const result = await model.generateContent(prompt);
  const response = result.response;
  const text = response.text();
  
  // è§£æ JSON
  const summary = JSON.parse(text);
  return summary;
}

function formatTimestamp(seconds: number): string {
  const mins = Math.floor(seconds / 60);
  const secs = Math.floor(seconds % 60);
  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}

// å¸¶é‡è©¦æ©Ÿåˆ¶çš„ç‰ˆæœ¬
export async function generateSummaryWithRetry(
  transcript: TranscriptSegment[],
  videoTitle: string,
  maxRetries = 2
): Promise<SummaryResult> {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await generateVideoSummary(transcript, videoTitle);
    } catch (error: any) {
      // Rate limit - ç­‰å¾…å¾Œé‡è©¦
      if (error.status === 429) {
        await new Promise(resolve => setTimeout(resolve, 2000 * (i + 1)));
        continue;
      }
      // Server error - é‡è©¦
      if (error.status === 500 || error.status === 503) {
        await new Promise(resolve => setTimeout(resolve, 1000));
        continue;
      }
      // å…¶ä»–éŒ¯èª¤ç›´æ¥æ‹‹å‡º
      throw error;
    }
  }
  throw new Error('Max retries exceeded');
}
```

**Gemini 2.5 Flash å„ªå‹¢ï¼š**
- å…è²»é¡åº¦å¤§ï¼ˆæ¯å¤© 1,500 requestsï¼‰
- é•·ä¸Šä¸‹æ–‡ï¼ˆ1M tokensï¼‰
- åŸç”Ÿ JSON æ¨¡å¼
- ç¹ä¸­ç¿»è­¯å“è³ªå¥½
- é€Ÿåº¦å¿«

---

### 5. å®šæ™‚ä»»å‹™ (Cron Job)

```typescript
// app/api/cron/check-new-videos/route.ts
import { NextResponse } from 'next/server';
import { prisma } from '@/lib/db';
import { YouTubeClient } from '@/lib/youtube/client';
import { addSummaryJob } from '@/lib/queue/summaryQueue';

export async function GET(request: Request) {
  // é©—è­‰è«‹æ±‚ä¾†è‡ª Cloud Scheduler
  const authHeader = request.headers.get('authorization');
  if (authHeader !== `Bearer ${process.env.CRON_SECRET}`) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }
  
  try {
    const channels = await prisma.channel.findMany({
      include: { user: true },
    });
    
    let newVideosCount = 0;
    
    for (const channel of channels) {
      const youtube = new YouTubeClient(channel.user.youtubeToken!);
      const videos = await youtube.getChannelVideos(channel.youtubeId, 5);
      
      for (const video of videos) {
        const videoId = video.id?.videoId;
        if (!videoId) continue;
        
        const existing = await prisma.video.findUnique({
          where: { youtubeId: videoId },
        });
        
        if (!existing) {
          // æ–°å½±ç‰‡ï¼å„²å­˜ä¸¦å»ºç«‹æ‘˜è¦ä»»å‹™
          const newVideo = await prisma.video.create({
            data: {
              youtubeId: videoId,
              title: video.snippet?.title || '',
              thumbnail: video.snippet?.thumbnails?.high?.url,
              publishedAt: new Date(video.snippet?.publishedAt!),
              channelId: channel.id,
              duration: 0,
            },
          });
          
          const summary = await prisma.summary.create({
            data: {
              videoId: newVideo.id,
              userId: channel.userId,
              status: 'pending',
            },
          });
          
          await addSummaryJob({
            summaryId: summary.id,
            videoId: newVideo.id,
            youtubeVideoId: videoId,
            userId: channel.userId,
          });
          
          newVideosCount++;
        }
      }
      
      await prisma.channel.update({
        where: { id: channel.id },
        data: { lastCheckedAt: new Date() },
      });
    }
    
    return NextResponse.json({ 
      success: true, 
      newVideos: newVideosCount,
    });
    
  } catch (error) {
    console.error('Cron error:', error);
    return NextResponse.json({ error: 'Internal error' }, { status: 500 });
  }
}
```

**GCP Cloud Scheduler è¨­å®šï¼š**
```bash
gcloud scheduler jobs create http check-new-videos \
  --schedule="0 8 * * *" \
  --uri="https://your-app.run.app/api/cron/check-new-videos" \
  --http-method=GET \
  --headers="Authorization=Bearer YOUR_CRON_SECRET" \
  --location=asia-east1
```

---

### 6. å‰ç«¯é é¢æ¶æ§‹

```
app/
â”œâ”€â”€ (auth)/
â”‚   â”œâ”€â”€ login/page.tsx              # ç™»å…¥é 
â”‚   â””â”€â”€ layout.tsx
â”‚
â”œâ”€â”€ (dashboard)/
â”‚   â”œâ”€â”€ layout.tsx                  # ä¸» Layoutï¼ˆå°èˆªåˆ—ï¼‰
â”‚   â”œâ”€â”€ page.tsx                    # é¦–é ï¼ˆæœ€è¿‘æ‘˜è¦ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ channels/
â”‚   â”‚   â”œâ”€â”€ page.tsx                # é »é“åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ new/page.tsx            # æ–°å¢é »é“
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â”œâ”€â”€ page.tsx            # é »é“è©³æƒ…ï¼ˆå½±ç‰‡åˆ—è¡¨ï¼‰
â”‚   â”‚       â””â”€â”€ videos/[videoId]/
â”‚   â”‚           â””â”€â”€ page.tsx        # å½±ç‰‡æ‘˜è¦é é¢
â”‚   â”‚
â”‚   â””â”€â”€ summaries/
â”‚       â””â”€â”€ page.tsx                # æ‰€æœ‰æ‘˜è¦åˆ—è¡¨
â”‚
â””â”€â”€ api/
    â”œâ”€â”€ auth/[...nextauth]/         # NextAuth
    â”œâ”€â”€ channels/                   # é »é“ API
    â”œâ”€â”€ videos/                     # å½±ç‰‡ API
    â”œâ”€â”€ summaries/                  # æ‘˜è¦ API
    â””â”€â”€ cron/                       # å®šæ™‚ä»»å‹™
```

**æ ¸å¿ƒå…ƒä»¶ï¼š**
- `ChannelCard`: é »é“å¡ç‰‡ï¼ˆé¡¯ç¤ºç¸®åœ–ã€æ¨™é¡Œã€ç«‹å³æ›´æ–°æŒ‰éˆ•ï¼‰
- `VideoList`: å½±ç‰‡åˆ—è¡¨ï¼ˆå¯å‹¾é¸å¤šå€‹å½±ç‰‡ï¼‰
- `SummaryView`: æ‘˜è¦é¡¯ç¤ºï¼ˆçµæ§‹åŒ–å‘ˆç¾ï¼‰
- `StatusBadge`: ç‹€æ…‹å¾½ç« ï¼ˆpending/processing/completed/failedï¼‰

**UI ç‰¹è‰²ï¼š**
- é»‘åº• + ç´«é»ƒæ¼¸å±¤è¨­è¨ˆï¼ˆä½¿ç”¨ ui-ux-pro-max skillï¼‰
- éŸ¿æ‡‰å¼è¨­è¨ˆ
- å³æ™‚ç‹€æ…‹æ›´æ–°ï¼ˆè¼ªè©¢æˆ– WebSocketï¼‰
- æ™‚é–“æˆ³å¯è·³è½‰åˆ° YouTube å°æ‡‰ä½ç½®

---

## éƒ¨ç½²æ¶æ§‹

### GCP + å¤–éƒ¨æœå‹™æ··åˆæ–¹æ¡ˆ

**æœå‹™é…ç½®ï¼š**

| æœå‹™ | æä¾›å•† | è¦æ ¼ | æœˆæˆæœ¬ |
|-----|-------|------|--------|
| Next.js Web | GCP Cloud Run | 512Mi RAM, min=0 | ~$1-3 |
| Worker | GCP Cloud Run | 1Gi RAM, min=1 | ~$3-5 |
| PostgreSQL | Neon | å…è²» 500MB | $0 |
| Redis | Upstash | å…è²» 10K cmd/day | $0 |
| Cron | GCP Cloud Scheduler | 1 job | $0 |
| **ç¸½è¨ˆ** | | | **$4-8/æœˆ** |

**åˆ©ç”¨ GCP é¡åº¦ï¼š**
- æ‚¨æœ‰ NT$9000+ é¡åº¦
- æ¯æœˆæ¶ˆè€—ç´„ $4-8 USD (~NT$120-240)
- **å¯ç”¨ 3-5 å¹´ï¼**

### Dockerfile

```dockerfile
FROM node:20-alpine AS base

FROM base AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM base AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npx prisma generate
RUN npm run build

FROM base AS runner
WORKDIR /app
ENV NODE_ENV=production
ENV PORT=3000

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static
COPY --from=builder /app/node_modules/.prisma ./node_modules/.prisma
COPY --from=builder /app/prisma ./prisma

USER nextjs
EXPOSE 3000

CMD ["node", "server.js"]
```

### éƒ¨ç½²è…³æœ¬

```bash
#!/bin/bash
# deploy.sh

PROJECT_ID="your-gcp-project-id"
REGION="asia-east1"

echo "ğŸ”¨ Building..."
docker build --platform linux/amd64 -t gcr.io/$PROJECT_ID/youtube-summarizer:latest .

echo "ğŸ“¤ Pushing..."
docker push gcr.io/$PROJECT_ID/youtube-summarizer:latest

echo "ğŸš€ Deploying Web..."
gcloud run deploy youtube-summarizer-web \
  --image gcr.io/$PROJECT_ID/youtube-summarizer:latest \
  --region $REGION \
  --allow-unauthenticated \
  --min-instances 0 \
  --max-instances 3 \
  --memory 512Mi

echo "ğŸ¤– Deploying Worker..."
gcloud run deploy youtube-summarizer-worker \
  --image gcr.io/$PROJECT_ID/youtube-summarizer:latest \
  --region $REGION \
  --no-allow-unauthenticated \
  --min-instances 1 \
  --max-instances 2 \
  --memory 1Gi \
  --command "npm,run,worker"

echo "âœ… Done!"
```

---

## æˆæœ¬åˆ†æ

### å…è²»é¡åº¦ä½¿ç”¨æƒ…æ³

**Gemini 2.5 Flashï¼š**
- å…è²»é¡åº¦ï¼šæ¯å¤© 1,500 requests
- å‡è¨­æ¯æœˆè™•ç† 100 éƒ¨å½±ç‰‡
- 100 éƒ¨ Ã· 30 å¤© = æ¯å¤© 3.3 éƒ¨
- **å®Œå…¨åœ¨å…è²»é¡åº¦å…§** âœ…

**Neon PostgreSQLï¼š**
- å…è²» 500MB å„²å­˜
- å‡è¨­æ¯å€‹æ‘˜è¦ 10KB
- å¯å„²å­˜ 50,000 å€‹æ‘˜è¦
- **å®Œå…¨å¤ ç”¨** âœ…

**Upstash Redisï¼š**
- å…è²» 10,000 commands/å¤©
- Queue æ“ä½œï¼šæ¯å€‹ä»»å‹™ç´„ 10 commands
- æ¯å¤©å¯è™•ç† 1,000 å€‹ä»»å‹™
- **å®Œå…¨å¤ ç”¨** âœ…

**GCP Cloud Runï¼š**
- Web (min=0)ï¼šç„¡æµé‡æ™‚ $0
- Worker (min=1)ï¼šç´„ $3-5/æœˆ
- **ç”¨æ‚¨çš„é¡åº¦ï¼Œå¯è·‘ 3-5 å¹´** âœ…

### ç¸½æˆæœ¬
- **é–‹ç™¼éšæ®µ**ï¼š$0ï¼ˆç”¨æœ¬æ©Ÿæ¸¬è©¦ï¼‰
- **ç”Ÿç”¢ç’°å¢ƒ**ï¼š$4-8/æœˆï¼ˆå…¨ç”¨ GCP é¡åº¦ï¼‰
- **AI æˆæœ¬**ï¼š$0ï¼ˆå…è²»é¡åº¦å…§ï¼‰

---

## é¢¨éšªèˆ‡æŒ‘æˆ°

### æŠ€è¡“é¢¨éšª

| é¢¨éšª | å½±éŸ¿ | ç·©è§£æªæ–½ |
|-----|------|---------|
| YouTube å­—å¹•ä¸å¯ç”¨ | ç„¡æ³•ç”Ÿæˆæ‘˜è¦ | å‰ç«¯æç¤ºä½¿ç”¨è€…ã€æ”¯æ´æ‰‹å‹•ä¸Šå‚³å­—å¹• |
| Gemini API Rate Limit | æ‘˜è¦å¤±æ•— | BullMQ é‡è©¦æ©Ÿåˆ¶ã€é™ç´šåˆ°æ’éšŠ |
| OAuth Token éæœŸ | ç„¡æ³•æŠ“å½±ç‰‡ | è‡ªå‹• refresh tokenã€å¤±æ•—é€šçŸ¥ä½¿ç”¨è€… |
| GCP é¡åº¦ç”¨å®Œ | æœå‹™åœæ­¢ | ç›£æ§ç”¨é‡ã€åˆ‡æ›åˆ° Vercel å…è²»æ–¹æ¡ˆ |

### ç”¢å“é¢¨éšª

| é¢¨éšª | å½±éŸ¿ | ç·©è§£æªæ–½ |
|-----|------|---------|
| ä½¿ç”¨é »ç‡ä½ | è³‡æºæµªè²» | Cloud Run min=0 çœæˆæœ¬ |
| æ‘˜è¦å“è³ªä¸ä½³ | ä½¿ç”¨è€…ä¸æ»¿æ„ | å„ªåŒ– promptã€æ”¯æ´æ‰‹å‹•ä¿®æ­£ |
| é »é“å¤ªå¤šå½±ç‰‡ | åˆæ¬¡æ–°å¢æˆæœ¬é«˜ | åªé¡¯ç¤ºæœ€æ–° 50 éƒ¨ã€ä½¿ç”¨è€…æ‰‹å‹•é¸æ“‡ |

---

## é–‹ç™¼æ™‚ç¨‹

### MVP é–‹ç™¼éšæ®µï¼ˆ6-8 é€±ï¼‰

**Week 1-2: åŸºç¤æ¶æ§‹**
- âœ… Next.js å°ˆæ¡ˆåˆå§‹åŒ–
- âœ… Prisma schema è¨­è¨ˆ
- âœ… NextAuth.js OAuth è¨­å®š
- âœ… åŸºæœ¬ UI layout (ui-ux-pro-max skill)

**Week 3: YouTube æ•´åˆ**
- âœ… YouTube API client å°è£
- âœ… é »é“åˆ—è¡¨é é¢
- âœ… å½±ç‰‡åˆ—è¡¨é é¢

**Week 4: Queue & AI**
- âœ… BullMQ Queue è¨­å®š
- âœ… Worker å¯¦ä½œ
- âœ… Gemini æ‘˜è¦åŠŸèƒ½

**Week 5: å‰ç«¯å®Œå–„**
- âœ… æ‘˜è¦é¡¯ç¤ºé é¢
- âœ… ç‹€æ…‹å³æ™‚æ›´æ–°
- âœ… UI/UX å„ªåŒ–

**Week 6: éƒ¨ç½²èˆ‡æ¸¬è©¦**
- âœ… Dockerfile è¨­å®š
- âœ… GCP éƒ¨ç½²
- âœ… å®šæ™‚ä»»å‹™è¨­å®š
- âœ… æ•´åˆæ¸¬è©¦

**å¾ŒçºŒå„ªåŒ–ï¼š**
- WebSocket å³æ™‚æ›´æ–°ï¼ˆå–ä»£è¼ªè©¢ï¼‰
- æ‘˜è¦å“è³ªè©•åˆ†
- ä½¿ç”¨è€…è‡ªè¨‚ prompt
- æ”¯æ´å¤šèªè¨€å­—å¹•

---

## æˆåŠŸæŒ‡æ¨™

### MVP éšæ®µ
- âœ… å¯æˆåŠŸæ–°å¢é »é“ä¸¦æŠ“å–å½±ç‰‡åˆ—è¡¨
- âœ… å¯å‹¾é¸å½±ç‰‡ä¸¦ç”Ÿæˆæ‘˜è¦
- âœ… æ‘˜è¦å“è³ªå¯æ¥å—ï¼ˆä¸»è§€è©•ä¼°ï¼‰
- âœ… å®šæ™‚ä»»å‹™æ­£å¸¸é‹ä½œ
- âœ… éƒ¨ç½²æˆæœ¬ < $10/æœˆ

### é•·æœŸç›®æ¨™
- ä½¿ç”¨è€…æ•¸ï¼š10-20 äººï¼ˆè‡ªå·± + æœ‹å‹ï¼‰
- æ¯æœˆè™•ç†å½±ç‰‡ï¼š100-200 éƒ¨
- æˆæœ¬æ§åˆ¶åœ¨å…è²»é¡åº¦å…§
- æ‘˜è¦æº–ç¢ºç‡ > 80%

---

## é™„éŒ„

### ç’°å¢ƒè®Šæ•¸æ¸…å–®

```env
# Database
DATABASE_URL=postgresql://user:pass@xxx.neon.tech/db?sslmode=require

# Redis
REDIS_URL=rediss://default:xxx@xxx.upstash.io:6379

# NextAuth
NEXTAUTH_URL=https://your-app.run.app
NEXTAUTH_SECRET=your-random-secret

# Google OAuth
GOOGLE_CLIENT_ID=xxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=xxx

# Google AI
GOOGLE_AI_API_KEY=your-gemini-api-key

# Cron Secret
CRON_SECRET=your-cron-secret
```

### ç›¸é—œè³‡æº
- [Next.js æ–‡ä»¶](https://nextjs.org/docs)
- [NextAuth.js æ–‡ä»¶](https://next-auth.js.org/)
- [YouTube Data API](https://developers.google.com/youtube/v3)
- [Gemini API æ–‡ä»¶](https://ai.google.dev/docs)
- [BullMQ æ–‡ä»¶](https://docs.bullmq.io/)
- [Prisma æ–‡ä»¶](https://www.prisma.io/docs)

### UI/UX è¨­è¨ˆåƒè€ƒ
- ä½¿ç”¨ ui-ux-pro-max skill å¯¦ä½œ
- ä¸»é¡Œï¼šé»‘åº• + ç´«é»ƒæ¼¸å±¤
- é¢¨æ ¼ï¼šç¾ä»£åŒ–ã€æ¥µç°¡
- é‡é»ï¼šå¯è®€æ€§ã€æ˜“ç”¨æ€§

---

## çµè«–

é€™å€‹å°ˆæ¡ˆåœ¨æŠ€è¡“ã€æˆæœ¬ã€æ™‚ç¨‹ä¸Šéƒ½éå¸¸å¯è¡Œï¼š

âœ… **æŠ€è¡“æˆç†Ÿ**ï¼šæ‰€æœ‰æŠ€è¡“éƒ½æ˜¯ç¶“éé©—è­‰çš„æ¨™æº–å¯¦ä½œ  
âœ… **æˆæœ¬æ¥µä½**ï¼šæœˆæˆæœ¬ $4-8ï¼Œå¯ç”¨ GCP é¡åº¦è·‘ 3-5 å¹´  
âœ… **é–‹ç™¼å¿«é€Ÿ**ï¼š6-8 é€±å¯å®Œæˆ MVP  
âœ… **åƒ¹å€¼æ˜ç¢º**ï¼šè§£æ±ºçœŸå¯¦çš„èªè¨€å­¸ç¿’ç—›é»  

**ä¸‹ä¸€æ­¥å»ºè­°ï¼š**
1. ä½¿ç”¨ `writing-plans` skill å»ºç«‹è©³ç´°å¯¦ä½œè¨ˆåŠƒ
2. ä½¿ç”¨ `ui-ux-pro-max` skill è¨­è¨ˆè¦–è¦ºä»‹é¢
3. é–‹å§‹å¯¦ä½œ MVP

---

**æ–‡ä»¶ç‰ˆæœ¬**: 1.0  
**æœ€å¾Œæ›´æ–°**: 2026-01-18  
**ç‹€æ…‹**: è¨­è¨ˆå®Œæˆï¼Œå¾…å¯¦ä½œ
